USE MASTER;
GO

IF DB_ID('VetClinicDB') IS NOT NULL
    DROP DATABASE VetClinicDB;
GO

CREATE DATABASE VetClinicDB;
GO

USE VetClinicDB;
GO

CREATE TABLE Owners (
    OwnerID INT IDENTITY(1,1) PRIMARY KEY,
    FirstName NVARCHAR(50) NOT NULL,
    LastName NVARCHAR(50) NOT NULL,
    Phone NVARCHAR(20) NOT NULL,
    Email NVARCHAR(100) NULL,
    RegistrationDate DATETIME DEFAULT GETDATE()
);

CREATE TABLE Pets (
    PetID INT IDENTITY(1,1) PRIMARY KEY,
    Name NVARCHAR(50) NOT NULL,
    Species NVARCHAR(50) NOT NULL,
    Breed NVARCHAR(50) NULL,
    Age INT NULL,
    OwnerID INT NOT NULL,
    IsActive BIT DEFAULT 1,
    CONSTRAINT FK_Pets_Owners FOREIGN KEY (OwnerID) REFERENCES Owners(OwnerID)
);

CREATE TABLE Vets (
    VetID INT IDENTITY(1,1) PRIMARY KEY,
    FirstName NVARCHAR(50) NOT NULL,
    LastName NVARCHAR(50) NOT NULL,
    Specialty NVARCHAR(100) NULL,
    HireDate DATE NOT NULL,
    Salary DECIMAL(10,2) CHECK (Salary >= 0),
    IsActive BIT DEFAULT 1
);

CREATE TABLE Visits (
    VisitID INT IDENTITY(1,1) PRIMARY KEY,
    PetID INT NOT NULL,
    VetID INT NOT NULL,
    VisitDate DATETIME NOT NULL,
    Diagnosis NVARCHAR(MAX) NULL,
    Treatment NVARCHAR(MAX) NULL,
    Cost DECIMAL(10,2) DEFAULT 0.00,
    Status NVARCHAR(20) DEFAULT 'Completed' CHECK (Status IN ('Scheduled', 'Completed', 'Cancelled')),
    CONSTRAINT FK_Visits_Pets FOREIGN KEY (PetID) REFERENCES Pets(PetID),
    CONSTRAINT FK_Visits_Vets FOREIGN KEY (VetID) REFERENCES Vets(VetID)
);

SELECT 
    TABLE_NAME,
    TABLE_TYPE
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_TYPE = 'BASE TABLE';
